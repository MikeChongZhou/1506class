<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="style.css"></link>
<title>注册</title>
<script type="text/javascript">
  function checkPassword() {
    var confirm = document.getElementById('confirm'); 
    var valid = document.getElementById('password').value == confirm.value;
    confirm.setCustomValidity(valid ? '' : '两次输入的密码不匹配');
    return valid;
  }
</script>
</head>

<body class="center register-back">

  <div class="css-table center register-form">
    <div class="register-form">
      <img src="images/banner.jpg" class="register-banner">
      <h1 class="padded-element">学员注册</h1>
    </div>
    <form class="register-form" action="cgi-bin/register.php" method="post"
        onsubmit="return checkPassword()">
      <fieldset>
        <div class="css-table-row">
          <label class="css-table-cell padded-element" for="name">真实中文姓名:
            <span class="required-asterisk">*</span>
          </label>
          <div class="css-table-cell"><input type="text" name="name" id="name" required></div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="email">Email:
            <span class="required-asterisk">*</span>
          </label>
          <div class="css-table-cell"><input type="email" name="email" id="email" required></div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="password">密码:</label>
          <div class="css-table-cell"><input type="password" name="password" id="password"></div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="confirm">密码确认:</label>
          <div class="css-table-cell">
            <input type="password" name="confirm" id="confirm" onchange="checkPassword()">
          </div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="sex">性别:</label>
          <div class="css-table-cell">
            <select name="sex">
              <option value="0">女</option>
              <option value="1">男</option>
            </select>
          </div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="birthday">生日:
            <span class="required-asterisk">*</span>
          </label>
          <div class="css-table-cell">
            <input type="text" name="birthday" pattern="\d{4}-\d{2}-\d{2}" placeholder="1970-01-01"
                required oninvalid="setCustomValidity('请按照类似1970-01-01这样的格式填写')"
                onchange="try{setCustomValidity('')}catch(e){}">
          </div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="phone">联系电话:
            <span class="required-asterisk">*</span>
          </label>
          <div class="css-table-cell">
            <input type="tel" name="phone" pattern="[\d+-]+" placeholder="000-000-0000" required>
          </div>
        </div>
        <div class="css-table-row">
          <label class="css-table-cell" for="im">微信(QQ):
            <span class="required-asterisk">*</span>
          </label>
          <div class="css-table-cell">
            <input type="text" name="im" required>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell">
            <label for="city">City <span class="required-asterisk">*</span></label>
          </div>
          <div class="css-table-cell"><input type="text" id="city" name="city" required></div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell">
            <label for="state">State <span class="required-asterisk">*</span></label>
          </div>
          <div class="css-table-cell">
            <select id="state" name="state"></select>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell">
            <label for="state">国家或地区 <span class="required-asterisk">*</span></label>
          </div>
          <div class="css-table-cell">
            <select id="country" name="country"></select>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell">
            <label for="education">文化程度<span class="required-asterisk">*</span></label>
          </div>
          <div class="css-table-cell">
            <select name="education">
              <option value="1">高中及以下</option>
              <option value="2">大专</option>
              <option value="3">本科</option>
              <option value="4">硕士</option>
              <option value="5">博士</option>
            </select>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell">
            <label for="occupation">职业<span class="required-asterisk">*</span></label>
          </div>
          <div class="css-table-cell">
            <input type="text" id="occupation" name="occupation" required>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><label for="skills">个人特长</label></div>
          <div class="css-table-cell"><input type="text" name="skills"></div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><label for="conversion">皈依年份(若已皈依):</label></div>
          <div class="css-table-cell">
            <input type="number" name="conversion" pattern="\d{4}"
                placeholder="2015">
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><label for="nickname">法名</label></div>
          <div class="css-table-cell"><input type="text" name="nickname"></div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><label for="volunteer">是否愿意参加学会发心工作？</label></div>
          <div class="css-table-cell">
            <select id="channel" name="volunteer">
              <option value="0">暂时先不</option>
              <option value="1">小组管理</option>
              <option value="2">资料收发</option>
              <option value="3">统计报数</option>
              <option value="5">英文翻译</option>
              <option value="4">其他工作</option>
            </select>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><label for="channel">您是通过什么渠道知道学会的？</label></div>
          <div class="css-table-cell">
            <select id="channel" name="channel">
              <option value="0">其他方式</option>
              <option value="1">智悲佛网</option>
              <option value="2">国际佛学网</option>
              <option value="3">美国智悲菩提讲修</option>
              <option value="4">本地招生材料</option>
              <option value="5">微信</option>
              <option value="6">微博或论坛</option>
              <option value="7">朋友介绍</option>
            </select>
          </div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><label for="comments">备注</label></div>
          <div class="css-table-cell"><input type="text" name="comments"></div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell">
            <label for="agreement">我已经阅读并将遵守
              <a href="https://docs.google.com/document/d/1nHy7BHnAUTw75CjjsBUPKIBU-nLlAAsPIIR35tSQLKk/edit?usp=sharing"
                  target="_blank">
                学会章程
              </a>
              <span class="required-asterisk">*</span>
            </label>
          </div>
          <div class="css-table-cell"><input type="checkbox" name="agreement" required></div>
        </div>
        <div class="css-table-row">
          <div class="css-table-cell"><input type="submit" value="注册"/></div>
        </div>
      </fieldset>
    </form>
  </div>
  <script type="text/javascript" src="js/countries.js">
  </script>
  <script type="text/javascript">
  var usIndex;
  var countrySelect = document.getElementById('country');
  
  for (var index in countryData.countries) {
    var country = countryData.countries[index];
    var code = countryData.getCountryCode(index);
    if (code == 'US') {
      usIndex = index;
    }
    countrySelect.add(new Option(country, code));
  }
  
  countrySelect.onchange = function() {
    var stateSelect = document.getElementById('state');
    stateSelect.options.length = 0;
    var states = countryData.getStates(countrySelect.selectedIndex);
    for (var sIndex in states) {
      var state = states[sIndex];
      stateSelect.add(new Option(state, sIndex));
    }
  };

  countrySelect.selectedIndex = usIndex;
  countrySelect.onchange();
  </script>
</body>
</html>
