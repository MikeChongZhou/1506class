<link rel="import" href="bower_components/iron-icons/editor-icons.html">

<div ng-repeat="group in schedule_groups" class="padded-element">
  <div class="center">
    <h2>{{group.name}}</h2>
    <iron-icon icon="editor:border-color" title="编辑" ng-click="editGroup(group)" class="selectable">
    </iron-icon>
    <iron-icon icon="icons:delete" title="删除" ng-click="removeGroup(group)" class="selectable"
        ng-if="group.id">
    </iron-icon>
  </div>
  <schedule-group-editor ng-if="group.editing" group="group" on-cancel="loadSchedules()"
      on-save="loadSchedules()">
  </schedule-group-editor>
  <div class="css-table odd-even schedule-tasks">
    <div class="css-table-row header">
      <div class="css-table-cell"><strong>周数</strong></div>
      <div class="css-table-cell"><strong>时间</strong></div>
      <div class="css-table-cell"><strong>上课内容</strong></div>
      <div class="css-table-cell"><strong>总结</strong></div>
      <div class="css-table-cell"><strong>串讲</strong></div>
      <div class="css-table-cell"></div>
    </div>
  
    <div ng-repeat="schedule in group.schedules" class="css-table-row"
        ng-class="{'vacation': vacation(schedule)}">
      <div class="css-table-cell">{{$index + 1}}</div>
      <div class="css-table-cell">{{getWeeklyTime(group, $index)}}</div>
      <div class="css-table-cell">
        {{group.courses[schedule.course_id].name}}
      </div>
      <div class="css-table-cell">
        <user-picker ng-if="schedule.id && !vacation(schedule)" user-id="schedule.review"
            user-list="users" user-picked="update(schedule, 'review', userId)">
        </user-picker>
      </div>
      <div class="css-table-cell">
        <user-picker ng-if="schedule.id && !vacation(schedule)" user-id="schedule.open"
            user-list="users" user-picked="update(schedule, 'open', userId)">
        </user-picker>
      </div>
      <div class="css-table-cell">
        <iron-icon icon="icons:delete" title="删除" ng-click="remove(schedule)"
            class="selectable" ng-if="schedule.id">
        </iron-icon>
      </div>
    </div>
  </div>
</div>
