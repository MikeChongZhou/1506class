<link rel="import" href="bower_components/iron-icons/editor-icons.html">
<div class="css-table order-details-header">
  <div class="css-table-row" ng-class="{'deletable': !order.status}">
    <div class="css-table-cell">
      <div>订单日期</div>
      <div>{{order.created_time}}</div>
      <div ng-switch="editable" class="padded-element">
        <label ng-switch-when="true">订单状态: 
          <select ng-model="order.status"
              ng-options="statusLabels[value] for value in [0, 1, 3]"
              ng-change="onUpdate()">
          </select>
        </label>
        <span ng-switch-default>订单状态: {{statusLabels[order.status]}}</span>
      </div>
      <div>总数: {{order.count}}</div>
    </div>
    <div class="css-table-cell">
      <div>金额: ${{order.sub_total}}</div>
      <div>预计国际运费: ${{order.int_shipping_estmt}}</div>
      <div>实际国际运费: ${{order.int_shipping}}</div>
      <div ng-switch="editable">
        <div ng-switch-when="true">
          <div><label>运费: $<input ng-model="order.shipping"></label></div>
          <div>总价: ${{order.grand_total}}</div>
          <div><label>已付: $<input ng-model="order.paid"></label></div>
          <input type="button" value="确认修改" ng-click="onUpdate()">
        </div>
        <div ng-switch-default>
          <div>运费: ${{order.shipping}}</div>
          <div>总价: ${{order.grand_total}}</div>
          <div>已付: ${{order.paid}}</div>
        </div>
        <strong>
          Balance: ${{order.balance}}
        </strong>
      </div>
    </div>
    <div class="css-table-cell">
      <address-editor user="order" with-contact="true"></address-editor>
    </div>
    <div class="css-table-cell">
      <div ng-if="order.shipping_date">发货：{{order.shipping_date}}</div>
      <div ng-if="order.paid_date">付款日期：{{order.paid_date}}</div>
    </div>
    <div class="css-table-cell">
      <div>订单号</div>
      <div>{{order.id}}</div>
      <a href="invoice_print.html?order_id={{order.id}}" target="_blank">
        Invoice
      </a>
    </div>
    <div class="css-table-cell">
      <iron-icon icon="delete" ng-click="onCancel()" class="delete-button"
          title="取消订单" ng-show="editable">
      </iron-icon>
    </div>
    <div class="css-table-cell">
      <iron-icon icon="editor:merge-type" ng-click="onMerge()"
          title="合并{{order.name}}的所有订单" class="clickable"
          ng-show="editable && order.mergeable">
      </iron-icon>
    </div>
  </div>
</div>
<div class="css-table shopping-cart-list">
  <div ng-repeat="item in order.items" class="css-table-row top-border">
    <div class="css-table-cell">{{item.name}}</div>
    <div class="css-table-cell">{{item.count}}</div>
    <div class="css-table-cell">${{item.price}}</div>
    <div class="css-table-cell">${{item.int_shipping}}</div>
  </div>
</div>
