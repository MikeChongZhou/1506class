<div class="css-table order-details-header">
  <div class="css-table-row" ng-class="{'deletable': !order.status}">
    <div class="css-table-cell">
      <div>订单日期</div>
      <div>{{order.created_time}}</div>
      <div ng-switch="editable" class="padded-element">
        <label ng-switch-when="true">订单状态: 
          <select ng-model="order.status"
              ng-options="statusLabels[value] for value in [0, 1, 3]"
              ng-change="onUpdate()">
          </select>
        </label>
        <span ng-switch-default>订单状态: {{statusLabels[order.status]}}</span>
      </div>
    </div>
    <div class="css-table-cell">
      <div>金额: ${{order.sub_total}}</div>
      <div ng-switch="editable">
        <div ng-switch-when="true">
          <div><label>运费: $<input ng-model="order.shipping"></label></div>
          <div><label>已付: $<input ng-model="order.paid"></label></div>
          <input type="button" value="确认修改" ng-click="onUpdate()">
        </div>
        <div ng-switch-default>
          <div>运费: ${{order.shipping || 0}}</div>
          <div>总价: ${{order.sub_total + (order.shipping || 0)}}</div>
          <div>已付: ${{order.paid || 0}}</div>
        </div>
        <div>
          Balance: ${{(order.sub_total + (order.shipping || 0) - order.paid).toFixed(2)}}
        </div>
      </div>
    </div>
    <div class="css-table-cell">
      <div>收货地址和联系方式</div>
      <address-editor user="order" with-contact="true"></address-editor>
    </div>
    <div class="css-table-cell">
      <div ng-if="order.shipping_date">发货：{{order.shipping_date}}</div>
      <div ng-if="order.paid_date">付款日期：{{order.paid_date}}</div>
    </div>
    <div class="css-table-cell">
      <div>订单号</div>
      <div>{{order.id}}</div>
      <a href="invoice_print.html?order_id={{order.id}}" target="_blank">
        Invoice
      </a>
    </div>
    <div class="css-table-cell">
      <iron-icon icon="delete" ng-click="onCancel()" class="delete-button"
          title="取消订单" ng-show="order.status == 0">
      </iron-icon>
    </div>
  </div>
</div>
<div class="css-table shopping-cart-list">
  <div ng-repeat="item in order.items" class="css-table-row top-border">
    <div class="css-table-cell">
      <img src="{{item.image}}" class="item-image small">
    </div>
    <div class="css-table-cell">
      <h3>{{item.name}}</h3> by {{item.producer}}
    </div>
    <div class="css-table-cell">
      ${{item.price}}
      <span ng-if="item.count > 1">(x {{item.count}})</span>
    </div>
  </div>
</div>
